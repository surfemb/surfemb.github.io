{"version":3,"sources":["utils.js","KeyViewer.js","DistributionViewer.js","App.js","theme.js","index.js"],"names":["loadFloat32Array","url","onload","oReq","XMLHttpRequest","open","responseType","Float32Array","response","send","cumulativeOffset","element","top","left","offsetTop","offsetLeft","offsetParent","getRelativeMousePos","e","x","y","round","ne","nativeEvent","touches","pageX","pageY","offset","target","Math","createShader","gl","type","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","log","getShaderInfoLog","deleteShader","createProgram","vertexShader","fragmentShader","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","KeyViewer","props","state","blend","canvasRef","React","createRef","animationFrameId","R","nj","lastX","lastY","allowRotation","prevProps","prevState","snapshot","this","load","window","cancelAnimationFrame","canvas","current","getContext","viewport","width","height","componentWillUnmount","utils","VERTEX_SHADER","FRAGMENT_SHADER","dataBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","vertexCount","urlRoot","data","bufferData","STATIC_DRAW","length","objPosLoc","getAttribLocation","umapPosLoc","colLoc","mLoc","getUniformLocation","blendLoc","lastR","lastBlend","glRender","clearColor","clear","COLOR_BUFFER_BIT","enable","DEPTH_TEST","useProgram","uniform1fv","R_","uniformMatrix4fv","false","reshape","tolist","enableVertexAttribArray","vertexAttribPointer","FLOAT","drawArrays","POINTS","requestAnimationFrame","dx","dR","t","S","sin","C","cos","get_Rx","dot","get_Ry","SVD","u","v","T","style","display","flexDirection","ref","cursor","touchAction","onMouseMove","rotate","onTouchMove","onMouseDown","startRotation","onTouchStart","onMouseLeave","stopRotation","onMouseUp","onTouchEnd","Stack","direction","spacing","sx","mb","alignItems","Slider","orientation","min","max","value","onChange","newBlend","setState","Component","DistributionViewer","embDim","nTextures","textureRange","Array","keys","useRef","imgCanvasCursorRef","queryCanvasCursorRef","canvasCursorRefs","queries","query","max_act","alpha","cursorPos","mouseMove","event","l","slice","useEffect","map","i","join","posBuffer","keyTextures","createTexture","forEach","tex","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","RGB32F","RGB","posLoc","keySamplerLocs","qLocs","aLoc","alphaLoc","ctxs","lastQuery","render","activeTexture","uniform1i","qLoc","uniform3fv","TRIANGLES","ctx","clearRect","beginPath","arc","PI","strokeStyle","stroke","containerStyle","position","borderRadius","overflow","imgStyle","canvasStyle","src","alt","datasets","d","replace","toLowerCase","objIds","ObjectTabs","objIdx","setObjIdx","Tabs","variant","scrollButtons","allowScrollButtonsMobile","newValue","objId","Tab","label","App","datasetIdx","objUrlRoot","ExampleLink","dataset","obj","indexOf","parseInt","Button","padding","minWidth","color","onClick","Container","maxWidth","Box","my","Typography","component","gutterBottom","textAlign","fontSize","marginBottom","setDatasetIdx","justifyContent","flexWrap","gap","userSelect","theme","createTheme","palette","primary","main","secondary","error","red","A400","ReactDOM","ThemeProvider","CssBaseline","document","querySelector"],"mappings":"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","file":"static/js/main.09fd607a.chunk.js","sourcesContent":["export function loadFloat32Array(url, onload) {\n    const oReq = new XMLHttpRequest()\n    oReq.open(\"GET\", url, true)\n    //oReq.setRequestHeader('Cache-Control', 'no-cache') // TODO: remove\n    oReq.responseType = \"arraybuffer\"\n    oReq.onload = () => onload(new Float32Array(oReq.response))\n    oReq.send(null)\n}\n\nfunction cumulativeOffset(element) {\n    let top = 0, left = 0\n    do {\n        top += element.offsetTop  || 0\n        left += element.offsetLeft || 0\n        element = element.offsetParent\n    } while(element)\n    return {top, left}\n}\n\nexport function getRelativeMousePos(e, round=false){\n    let x, y\n    const ne = e.nativeEvent\n    if (ne.touches){\n        x = ne.touches[0].pageX\n        y = ne.touches[0].pageY\n    }else{\n        x = ne.pageX\n        y = ne.pageY\n    }\n    const offset = cumulativeOffset(e.target)\n    x = x - offset.left\n    y = y - offset.top\n    if (round){\n        x = Math.round(x)\n        y = Math.round(y)\n    }\n    return {x, y}\n}\n\nexport function createShader(gl, type, source) {\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (success) {\n        return shader;\n    }\n\n    console.log(gl.getShaderInfoLog(shader));\n    gl.deleteShader(shader);\n}\n\n\nexport function createProgram(gl, vertexShader, fragmentShader) {\n    const program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (success) {\n        return program;\n    }\n\n    console.log(gl.getProgramInfoLog(program));\n    gl.deleteProgram(program);\n}","import React from 'react';\nimport Slider from '@mui/material/Slider';\nimport Stack from '@mui/material/Stack';\nimport {BubbleChart as UmapIcon} from \"@mui/icons-material\";\nimport {Stop as ObjIcon} from \"@mui/icons-material\";\nimport * as utils from \"./utils\";\n\nimport * as nj from 'numjs';\nimport {SVD} from 'svd-js'\n\nfunction get_Rx(t) {\n    const S = Math.sin(t), C = Math.cos(t)\n    return nj.array([\n        [1, 0, 0],\n        [0, C, -S],\n        [0, S, C]\n    ])\n}\n\nfunction get_Ry(t) {\n    const S = Math.sin(t), C = Math.cos(t)\n    return nj.array([\n        [C, 0, S],\n        [0, 1, 0],\n        [-S, 0, C]\n    ])\n}\n\n\nexport default class KeyViewer extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {blend: 0.}\n        this.canvasRef = React.createRef()\n\n        this.animationFrameId = null\n        this.R = nj.identity(3)\n        this.lastX = null\n        this.lastY = null\n        this.allowRotation = false\n        this.gl = null\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props !== prevProps) this.load()\n    }\n\n    componentWillUnmount() {\n        if (this.animationFrameId !== null)\n            window.cancelAnimationFrame(this.animationFrameId)\n    }\n\n    componentDidMount() {\n        const canvas = this.canvasRef.current\n        this.gl = canvas.getContext('webgl')\n        this.gl.viewport(0, 0, canvas.width, canvas.height)\n        this.load()\n    }\n\n    load(){\n        this.componentWillUnmount()\n        const gl = this.gl\n        const program = utils.createProgram(gl,\n            utils.createShader(gl, gl.VERTEX_SHADER, `\n                attribute vec4 objPos;\n                attribute vec4 umapPos;\n                attribute vec3 col;\n                varying vec3 colOut;\n                \n                uniform mat4 M;\n                uniform float blend;\n                \n                void main() {\n                    colOut = col;\n                    vec4 pos = ((1.-blend) * objPos + blend * umapPos) * vec4(.95, .95, .95, 1.);\n                    pos = M * pos;\n                    gl_Position = pos * vec4(1., 1., -1., 1.);\n                    gl_PointSize = 2.0;\n                }\n            `),\n            utils.createShader(gl, gl.FRAGMENT_SHADER, `\n                precision mediump float;\n                varying vec3 colOut;\n                void main() {\n                    gl_FragColor = vec4(colOut, 1);\n                }\n            `)\n        )\n\n        const dataBuffer = gl.createBuffer()\n        gl.bindBuffer(gl.ARRAY_BUFFER, dataBuffer)\n        let vertexCount = 0\n\n        utils.loadFloat32Array(this.props.urlRoot + '-keydata.bin', data => {\n            gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW)\n            vertexCount = data.length / 9\n        })\n\n        const objPosLoc = gl.getAttribLocation(program, 'objPos')\n        const umapPosLoc = gl.getAttribLocation(program, 'umapPos')\n        const colLoc = gl.getAttribLocation(program, 'col')\n\n        const mLoc = gl.getUniformLocation(program, 'M')\n        const blendLoc = gl.getUniformLocation(program, 'blend')\n\n        let lastR = null, lastBlend = null;\n\n        const glRender = () => {\n            if ((lastR !== this.R || lastBlend !== this.state.blend) && vertexCount > 0) {\n                lastBlend = this.state.blend\n                lastR = this.R\n\n                gl.clearColor(0.0, 0.0, 0.0, 0.0)\n                gl.clear(gl.COLOR_BUFFER_BIT)\n                gl.enable(gl.DEPTH_TEST)\n                gl.useProgram(program)\n\n                gl.uniform1fv(blendLoc, [this.state.blend])\n\n                const R_ = nj.concatenate([this.R, nj.zeros([3, 1])])\n                gl.uniformMatrix4fv(mLoc, gl.false, [...R_.reshape(-1).tolist(), 0, 0, 0, 1])\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, dataBuffer)\n\n                gl.enableVertexAttribArray(objPosLoc)\n                gl.vertexAttribPointer(objPosLoc, 3, gl.FLOAT, false, 4 * 9, 0)\n\n                gl.enableVertexAttribArray(umapPosLoc)\n                gl.vertexAttribPointer(umapPosLoc, 3, gl.FLOAT, false, 4 * 9, 4 * 3)\n\n                gl.enableVertexAttribArray(colLoc)\n                gl.vertexAttribPointer(colLoc, 3, gl.FLOAT, false, 4 * 9, 4 * 6)\n\n                gl.drawArrays(gl.POINTS, 0, vertexCount)\n            }\n            this.animationFrameId = window.requestAnimationFrame(glRender)\n        }\n        glRender()\n    }\n\n    rotate(e) {\n        if (this.allowRotation){\n            const {x, y} = utils.getRelativeMousePos(e)\n            if (this.lastX !== null && this.lastY !== null) {\n                const dx = x - this.lastX, dy = y - this.lastY\n                const s = -1e-2\n                const dR = get_Rx(dy * s).dot(get_Ry(dx * s))\n                let {u, v} = SVD(this.R.dot(dR).tolist())\n                this.R = nj.array(u).dot(nj.array(v).T)\n            }\n            this.lastX = x\n            this.lastY = y\n        }\n    }\n\n    startRotation(e){\n        this.allowRotation = true\n        const {x, y} = utils.getRelativeMousePos(e)\n        this.lastX = x\n        this.lastY = y\n    }\n\n    stopRotation(){\n        this.allowRotation = false\n        this.lastX = null\n        this.lastY = null\n    }\n\n    render() {\n        return (<div style={{display: 'flex', flexDirection: 'row'}}>\n            <canvas ref={this.canvasRef} width=\"224\" height=\"224\"\n                    style={{width: 224, cursor: 'move', touchAction: 'none'}}\n                    onMouseMove={e => this.rotate(e)} onTouchMove={e => this.rotate(e)}\n                    onMouseDown={e => this.startRotation(e)} onTouchStart={e => this.startRotation(e)}\n                    onMouseLeave={() => this.stopRotation()} onMouseUp={() => this.stopRotation()}\n                    onTouchEnd={() => this.stopRotation()}\n            />\n            <Stack direction=\"column\" spacing={2} sx={{mb: 1}} alignItems=\"center\" style={{height: 224}}>\n                <UmapIcon/>\n                <Slider orientation='vertical' min={0} max={100}\n                        value={this.state.blend * 100}\n                        onChange={(e, newBlend) => this.setState({blend: newBlend / 100})}\n                />\n                <ObjIcon/>\n            </Stack>\n\n        </div>)\n    }\n}","import React, {useRef, useEffect} from 'react';\nimport * as utils from \"./utils\";\n\nexport default function DistributionViewer(props) {\n    const {urlRoot, embDim} = props\n    const nTextures = embDim / 3\n    const textureRange = [...Array(nTextures).keys()]\n\n    const canvasRef = useRef(null)\n    const imgCanvasCursorRef = useRef(null)\n    const queryCanvasCursorRef = useRef(null)\n    const canvasCursorRefs = [imgCanvasCursorRef, queryCanvasCursorRef]\n\n    let queries = null\n    let query = null\n    let max_act = null\n    let alpha = null\n\n    utils.loadFloat32Array(urlRoot + '-queries.bin', data => {\n        queries = data;\n    })\n\n    let cursorPos = null;\n\n    const mouseMove = event => {\n        let {x, y} = utils.getRelativeMousePos(event)\n        y = Math.min(223, Math.max(0, y))\n        x = Math.min(223, Math.max(0, x))\n        cursorPos = [x, y]\n        if (queries !== null) {\n            const l = (Math.round(y) * 224 + Math.round(x)) * (embDim + 2)\n            query = queries.slice(l, l + embDim)\n            max_act = queries[l + embDim]\n            alpha = queries[l + embDim + 1]\n        }\n    }\n\n    useEffect(() => {\n        const canvas = canvasRef.current\n        const gl = canvas.getContext('webgl2')\n        //gl.getExtension('OES_texture_float')\n        //TODO: change back to webgl with OES texture float support to support IOS\n        let animationFrameId\n\n        const vertexShader = utils.createShader(gl, gl.VERTEX_SHADER, `#version 300 es\n            in vec4 pos;\n            out vec2 vTextureCoord;           \n            void main() {\n                gl_Position = pos;\n                vTextureCoord = pos.xy * vec2(0.5, -0.5) + 0.5;\n            }\n        `)\n\n        const fragmentShader = utils.createShader(gl, gl.FRAGMENT_SHADER, `#version 300 es\n            precision mediump float;\n            in vec2 vTextureCoord;\n            ${textureRange.map(i => 'uniform sampler2D keySampler' + i + ';').join('\\n')}\n            ${textureRange.map(i => 'uniform vec3 q' + i + ';').join('\\n')}\n            uniform float a;\n            uniform float alpha;\n            out vec4 outCol;\n            void main() {\n                ${textureRange.map(i => 'vec3 k' + i + '=texture(keySampler' + i + ',vTextureCoord).xyz;').join('\\n')}\n                vec3 dpv = ${textureRange.map(i => 'q' + i + '*k' + i).join('+')};\n                float dp = dpv.x + dpv.y + dpv.z;\n                float v = pow(exp(dp - a), 0.5) * alpha;\n                if (${textureRange.map(i => ['x', 'y', 'z'].map(x => 'k' + i + '.' + x + '==0.').join('&&')).join('&&')})\n                    v = 0.;\n                outCol = vec4(v, 0., 0., v);\n            }\n        `)\n\n        const program = utils.createProgram(gl, vertexShader, fragmentShader);\n\n        const posBuffer = gl.createBuffer()\n        gl.bindBuffer(gl.ARRAY_BUFFER, posBuffer)\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n            -1., 1., 1., 1., 1., -1.,\n            -1., 1., 1., -1., -1, -1,\n        ]), gl.STATIC_DRAW)\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height)\n\n        const keyTextures = textureRange.map(() => gl.createTexture())\n        keyTextures.forEach((tex, i) => {\n            gl.bindTexture(gl.TEXTURE_2D, tex)\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST)\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST)\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n            utils.loadFloat32Array(urlRoot + '-keys-' + i + '.bin', data => {\n                gl.bindTexture(gl.TEXTURE_2D, tex)\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB32F, 224, 224, 0, gl.RGB, gl.FLOAT, data)\n            })\n        })\n\n        const posLoc = gl.getAttribLocation(program, 'pos')\n        const keySamplerLocs = textureRange.map(i => gl.getUniformLocation(program, 'keySampler' + i))\n        const qLocs = textureRange.map(i => gl.getUniformLocation(program, 'q' + i))\n        const aLoc = gl.getUniformLocation(program, 'a')\n        const alphaLoc = gl.getUniformLocation(program, 'alpha')\n\n        // cursor\n        const ctxs = canvasCursorRefs.map(ref => ref.current.getContext('2d'))\n\n        let lastQuery = null;\n\n        const render = () => {\n            if (lastQuery !== query) {\n                lastQuery = query\n\n                gl.clearColor(0.0, 0.0, 0.0, 0.0)\n                gl.clear(gl.COLOR_BUFFER_BIT)\n                gl.useProgram(program)\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, posBuffer)\n                gl.enableVertexAttribArray(posLoc)\n                gl.vertexAttribPointer(posLoc, 2, gl.FLOAT, false, 0, 0)\n\n                textureRange.forEach((i) => {\n                    gl.activeTexture(gl['TEXTURE' + i])\n                    gl.bindTexture(gl.TEXTURE_2D, keyTextures[i])\n                    gl.uniform1i(keySamplerLocs[i], i)\n                })\n\n                if (query !== null) {\n                    qLocs.forEach((qLoc, i) => {\n                        gl.uniform3fv(qLoc, query.slice(i * 3, (i + 1) * 3))\n                    })\n                    gl.uniform1fv(aLoc, [max_act])\n                    gl.uniform1fv(alphaLoc, [alpha])\n\n                    gl.drawArrays(gl.TRIANGLES, 0, 6)\n                }\n\n                // cursor\n                //ctx.clearColor(0., 0., 0., 0.)\n                ctxs.forEach(ctx => {\n                    ctx.clearRect(0, 0, 224, 224)\n                    if (query !== null) {\n                        ctx.beginPath()\n                        ctx.arc(...cursorPos, 8, 0, Math.PI * 2)\n                        ctx.strokeStyle = 'white'\n                        ctx.stroke()\n                    }\n                })\n            }\n            animationFrameId = window.requestAnimationFrame(render)\n        };\n        render()\n\n        return () => window.cancelAnimationFrame(animationFrameId)\n    })\n\n    const containerStyle = {position: 'relative', width: 224, height: 224, borderRadius: 10, overflow: 'hidden'}\n    const imgStyle = {width: 224, height: 224}\n    const canvasStyle = {\n        width: 224, height: 224, position: 'absolute',\n        left: 0, top: 0, cursor: 'none', touchAction: 'none'\n    }\n\n    return [\n        <div style={containerStyle} key={0}>\n            <img src={urlRoot + '-img.png'} alt=\"input\" style={imgStyle}/>\n            <canvas ref={canvasRef} width=\"224\" height=\"224\" style={canvasStyle}/>\n            <canvas ref={imgCanvasCursorRef} width=\"224\" height=\"224\" style={canvasStyle}\n                    onMouseMove={mouseMove} onTouchMove={mouseMove}\n                    onMouseLeave={() => query = null}\n            />\n        </div>,\n        <div style={containerStyle} key={1}>\n            <img src={urlRoot + '-queryimg.png'} alt=\"queries\" style={imgStyle}/>\n            <canvas ref={queryCanvasCursorRef} width=\"224\" height=\"224\" style={canvasStyle}\n                    onMouseMove={mouseMove} onTouchMove={mouseMove}\n                    onMouseLeave={() => query = null}\n            />\n        </div>\n    ]\n}","import * as React from 'react';\nimport Container from '@mui/material/Container';\nimport Typography from '@mui/material/Typography';\nimport Box from '@mui/material/Box';\nimport Tabs from '@mui/material/Tabs';\nimport Tab from '@mui/material/Tab';\nimport Button from '@mui/material/Button';\nimport KeyViewer from \"./KeyViewer\";\nimport DistributionViewer from \"./DistributionViewer\";\nimport \"./App.css\";\n\nconst embDim = 12\nconst urlRoot = '/data' + embDim + '/'\n\n\nconst datasets_display = [\n    \"LM-O\",\n    \"T-LESS\",\n    \"TUD-L\",\n    \"IC-BIN\",\n    \"ITODD\",\n    \"HB\",\n    \"YCB-V\"\n]\nconst datasets = datasets_display.map(d => d.replace('-', '').toLowerCase())\n\n\nconst objIds = [\n    [1, 5, 6, 8, 9, 10, 11, 12],\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30],\n    [1, 2, 3],\n    [1, 2],\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28],\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33],\n    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21]\n]\n\nfunction ObjectTabs(props) {\n    const {objIdx, setObjIdx, objIds} = props;\n    return (\n        <Tabs variant='scrollable' scrollButtons allowScrollButtonsMobile value={objIdx}\n              onChange={(event, newValue) => setObjIdx(newValue)}>\n            {objIds.map((objId, i) =>\n                <Tab key={i} label={objId}/>\n            )}\n        </Tabs>\n    );\n}\n\n\nexport default function App() {\n    const [{datasetIdx, objIdx}, setState] = React.useState({datasetIdx: 1, objIdx: 0})\n\n    const setDatasetIdx = datasetIdx => setState({datasetIdx, objIdx: 0})\n    const setObjIdx = objIdx => setState({datasetIdx, objIdx})\n\n    const dataset = datasets[datasetIdx]\n    const objUrlRoot = urlRoot + dataset + '-' + objIdx\n\n    const ExampleLink = props => {\n        let {dataset, obj} = props\n        if (typeof dataset === 'string') dataset = datasets.indexOf(dataset)\n        if (typeof obj === 'string') obj = objIds[dataset].indexOf(parseInt(obj))\n        return [\n            <span> </span>,\n            <Button style={{padding:0, minWidth:0, color: '#143b96'}} onClick={() => setState({\n                datasetIdx: dataset, objIdx: obj\n            })}>\n                {datasets[dataset]}/{objIds[dataset][obj]}\n            </Button>,\n            //props.children || (<span> </span>)\n        ]\n    }\n\n    return (\n        <Container style={{maxWidth: 900}}>\n            <Box sx={{my: 4}}>\n                <Typography variant=\"h4\" component=\"h1\" gutterBottom textAlign='center'>\n                    SurfEmb\n                </Typography>\n                <Typography textAlign='center' fontSize={18}>\n                    Dense and Continuous Correspondence Distributions <br/>\n                    for Object Pose Estimation with Learnt Surface Embeddings\n                </Typography>\n            </Box>\n            <Box sx={{width: '100%', marginBottom: 2}}>\n                <Box>\n                    <Tabs variant='scrollable' scrollButtons allowScrollButtonsMobile value={datasetIdx}\n                          onChange={(event, newValue) => {\n                              setDatasetIdx(newValue);\n                              console.log(newValue)\n                          }}>\n                        {datasets.map((dataset, i) =>\n                            <Tab key={i} label={dataset}/>\n                        )}\n                    </Tabs>\n                    <ObjectTabs objIds={objIds[datasetIdx]} objIdx={objIdx} setObjIdx={setObjIdx}/>\n                </Box>\n            </Box>\n            <Box>\n                <div style={{\n                    display: 'flex', flexDirection: 'row', justifyContent: 'center',\n                    flexWrap: 'wrap', gap: 20, userSelect: 'none'\n                }}>\n                    <DistributionViewer embDim={embDim} urlRoot={objUrlRoot}/>\n                    <KeyViewer key={2} urlRoot={objUrlRoot}/>\n                </div>\n            </Box>\n            <Box>\n                <p>\n                    From left to right: input image, query image, keys.\n                    Hover the mouse over the input or query image to see the estimated distribution over the object\n                    surface, imposed on the image in the ground truth pose.\n                    Drag the keys to rotate them.\n                    Drag the slider to interpolate between keys' object coordinates or UMAP 3D-projection.\n                </p>\n                <p>\n                    Interesting examples include discrete rotational symmetry:\n                    <ExampleLink dataset=\"tless\" obj=\"2\"/>,\n                    <ExampleLink dataset=\"tless\" obj=\"27\"/>,\n                    <ExampleLink dataset=\"tless\" obj=\"30\"/>,\n                    <ExampleLink dataset=\"ycbv\" obj=\"21\"/>,\n                    <ExampleLink dataset=\"itodd\" obj=\"7\"/>,\n                    <span> </span>and full rotational symmetry:\n                    <ExampleLink dataset=\"tless\" obj=\"14\"/>,\n                    <ExampleLink dataset=\"tless\" obj=\"15\"/>,\n                    <ExampleLink dataset=\"tless\" obj=\"17\"/>.\n\n                    The distributions may look worse because of poor ground truth poses:\n                    <ExampleLink dataset=\"lmo\" obj=\"1\"/>, or poor meshes:\n                    <ExampleLink dataset=\"tudl\" obj=\"1\"/>.\n                    You can get an idea about the ground truth pose quality\n                    by hovering the mouse over the edges of the object.\n                </p>\n                <p>\n                    The UMAP projection of keys shows the key manifold and thus primarily\n                    provides insight to constant ambiguities, like symmetry.\n                    A query can represent more ambiguities which is best seen by exploring the distributions.\n                </p>\n                <p>\n                    Examples are chosen randomly for each object in the seven BOP Challenge datasets.\n                    Models are trained purely on synthetic images and shown on real images\n                    except for ITODD and HB, where ground truth poses are not publicly available on the test images.\n                    For those datasets, we show examples on synthetic images instead.\n                </p>\n            </Box>\n        </Container>\n    );\n}","import { red } from '@mui/material/colors';\nimport { createTheme } from '@mui/material/styles';\n\n// A custom theme for this app\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n  },\n});\n\nexport default theme;","import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport { ThemeProvider } from '@mui/material/styles';\nimport App from './App';\nimport theme from './theme';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n    <CssBaseline />\n    <App />\n  </ThemeProvider>,\n  document.querySelector('#root'),\n);"],"sourceRoot":""}